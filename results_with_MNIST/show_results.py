import matplotlib.pyplot as plt
import numpy as np

# ----------------------------
# Updated data
# ----------------------------
data = {
    # 0: {
    #     0.00: [0.90, 1.00, 0.90, 0.95, 0.90],
    #     0.01: [0.90, 1.00, 0.90, 0.95, 0.90],
    #     0.02: [0.90, 0.95, 0.90, 0.95, 0.90],
    #     0.03: [0.90, 0.95, 0.90, 0.90, 0.90],
    #     0.04: [0.90, 0.95, 0.90, 0.90, 0.90],
    #     0.05: [0.90, 0.95, 0.90, 0.90, 0.90],
    #     0.06: [0.90, 0.95, 0.90, 0.90, 0.90],
    #     0.07: [0.90, 0.90, 0.90, 0.90, 0.90],
    #     0.08: [0.90, 0.90, 0.90, 0.90, 0.90],
    #     0.09: [0.90, 0.90, 0.90, 0.90, 0.90],
    #     0.10: [0.90, 0.90, 0.65, 0.70, 0.90],
    # },
    # 1: {
    #     0.00: [0.95, 1.00, 0.95, 0.95, 0.95],
    #     0.01: [0.95, 0.90, 0.90, 0.90, 0.90],
    #     0.02: [0.85, 0.85, 0.85, 0.85, 0.85],
    #     0.03: [0.85, 0.85, 0.80, 0.85, 0.85],
    #     0.04: [0.80, 0.80, 0.80, 0.70, 0.75],
    #     0.05: [0.75, 0.75, 0.75, 0.65, 0.70],
    #     0.06: [0.70, 0.75, 0.70, 0.60, 0.70],
    #     0.07: [0.70, 0.75, 0.65, 0.60, 0.65],
    #     0.08: [0.65, 0.80, 0.45, 0.60, 0.55],
    #     0.09: [0.65, 0.50, 0.45, 0.65, 0.50],
    #     0.10: [0.60, 0.50, 0.50, 0.60, 0.45],
    # },
    # 2: {
    #     0.00: [0.95, 1.00, 0.95, 0.95, 1.00],
    #     0.01: [0.95, 0.90, 0.95, 0.90, 0.90],
    #     0.02: [0.85, 0.85, 0.90, 0.85, 0.85],
    #     0.03: [0.85, 0.85, 0.85, 0.85, 0.85],
    #     0.04: [0.80, 0.80, 0.80, 0.70, 0.70],
    #     0.05: [0.80, 0.75, 0.75, 0.65, 0.70],
    #     0.06: [0.70, 0.75, 0.75, 0.60, 0.65],
    #     0.07: [0.70, 0.75, 0.70, 0.60, 0.60],
    #     0.08: [0.70, 0.45, 0.65, 0.60, 0.55],
    #     0.09: [0.70, 0.45, 0.50, 0.65, 0.50],
    #     0.10: [0.65, 0.45, 0.50, 0.70, 0.55],
    # },
    3: {
        0.00: [0.80, 0.65, 0.55, 0.80, 0.85],
        0.01: [0.80, 0.65, 0.70, 0.85, 0.85],
        0.02: [0.80, 0.65, 0.75, 0.80, 0.75],
        0.03: [0.75, 0.65, 0.75, 0.75, 0.75],
        0.04: [0.75, 0.65, 0.75, 0.75, 0.75],
        0.05: [0.70, 0.70, 0.75, 0.70, 0.75],
        0.06: [0.70, 0.70, 0.75, 0.75, 0.75],
        0.07: [0.60, 0.65, 0.75, 0.70, 0.70],
        0.08: [0.60, 0.65, 0.70, 0.70, 0.65],
        0.09: [0.60, 0.60, 0.65, 0.65, 0.65],
        0.10: [0.65, 0.60, 0.65, 0.65, 0.65],
    },
    4: {
        0.00: [0.95, 0.90, 0.90, 0.90, 0.95],
        0.01: [0.95, 0.90, 0.90, 0.95, 0.90],
        0.02: [0.95, 0.90, 0.90, 0.95, 0.95],
        0.03: [0.95, 0.95, 0.95, 0.90, 0.90],
        0.04: [0.95, 0.95, 0.95, 0.90, 0.90],
        0.05: [0.95, 0.90, 0.90, 0.95, 0.75],
        0.06: [0.95, 0.90, 0.90, 0.95, 0.75],
        0.07: [0.95, 0.90, 0.90, 0.95, 0.75],
        0.08: [0.95, 0.90, 0.90, 0.95, 0.75],
        0.09: [0.95, 0.90, 0.90, 0.95, 0.75],
        0.10: [0.95, 0.85, 0.90, 0.95, 0.75],
    },
}

# ----------------------------
plt.style.use("seaborn-v0_8-whitegrid")
plt.rcParams.update(
    {
        "font.size": 14,
        "axes.labelsize": 16,
        "axes.titlesize": 18,
        "legend.fontsize": 14,
        "xtick.labelsize": 13,
        "ytick.labelsize": 13,
        "lines.linewidth": 2,
        "figure.dpi": 150,
    }
)

colors = {
    0: "#1f77b4",  # blue
    1: "#e90f0f",  # red
    2: "#4aff0e",  # yellow
    3: "#0f0f0f",  # black
    4: "#ff7f0e",  # orange
}

linestyles = {0: "-", 1: "--", 2: ":", 3: "-.", 4: "-"}

labels = {
    0: "Equiv",
    1: "ApproxEquiv1",
    2: "ApproxEquiv2",
    3: "QNN",
    4: "Equivariantized QNN",
}

plt.figure(figsize=(8, 5))

# ---------------------------------------------------
# Plot data with shaded error intervals
# ---------------------------------------------------
for neq in data:
    noises = sorted(data[neq].keys())
    means = np.array([np.mean(data[neq][n]) for n in noises])
    stds = np.array([np.std(data[neq][n]) for n in noises])

    # Plot mean line
    plt.plot(
        noises,
        means,
        linestyle=linestyles[neq],
        color=colors[neq],
        marker="o",
        markersize=6,
        label=labels[neq],
    )

    # Shaded Â±std region
    plt.fill_between(noises, means - stds, means + stds, color=colors[neq], alpha=0.15)

# ---------------------------------------------------
# Axes, title, legend
# ---------------------------------------------------
plt.xlabel("Noise level")
plt.ylabel("Test Accuracy")
plt.title("Effect of Noise and Non-Equivariance on Test Accuracy")

plt.ylim(0.4, 1.05)
plt.xlim(-0.005, 0.105)

plt.legend(frameon=True, loc="best")
plt.tight_layout()
# plt.savefig("results_plot.jpg")
plt.show()
